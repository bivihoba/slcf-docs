Шаблоны BEMXML
=========

Фрагменты интерфейса, которые повторяются на многих страницах, удобно выносить в шаблоны.
Следует обратить внимание, что это шаблоны не над данными, а над фрагментами кода.

## Шаблоны

Шаблоны бывают общие (уровня бандла) и локальные (уровня страницы).
Общие шаблоны выносятся в файлы, в папку templates бандла.
Локальные шаблоны определяются прямо на странице, внутри элемента templates.

### Переопределение шаблонов

При подключении на страницу нескольких файлов с шаблонами,
в случае пересечения, действовать будет последний в порядке подключения шаблон.
Если для страницы существует и локальный шаблон и общий, то исполняться будет локальный шаблон.

### Объявление шаблонов

Шаблон объявляется в области templates через пространство имен "t:".
Шаблон может содержать вызов другого шаблона, но вызывать шаблоны рекурсивно нельзя.

### Именование шаблонов

Хорошим тоном является называть шаблон по имени первого блока этого шаблона,
если такой имеется (первым узлом шаблона не обязательно должен быть блок).
Если этот блок имеет характерный модификатор, то нужно включить его в имя шаблона
(придерживаясь принятой БЭМ-нотации).

При этом важно помнить, что шаблон не отождествляется с БЭМ-сущностью.

### Вызов шаблонов

Вызов шаблона осуществляется через пространство имен "p:".

В шаблоне может содержаться специальная инструкция-указатель ```<p:content/>```,
при вызове шаблона, на её будет вставлено содержимое шаблона.

В области page-canvas можно осуществлять вложенные вызовы шаблонов с подобными указателями.

### Пример

```
<t:page>
	<b:page-box>
		<b:page>
			<p:header />
			<p:main />
		</b:page>
		<p:footer />
	</b:page-box>
</t:page>

<t:header>
	<b:header>
		<e:in>
			<b:stripe>
				<p:logo />
			</b:stripe>
		</e:in>
	</b:header>
</t:header>

<t:logo>
	<b:logo-box>
		<b:logo>
			<a:link/>
			<e:image x:src="../production/images/logo.png"/>
		</b:logo>
	</b:logo-box>
</t:logo>

<t:main>
	<b:main>
		<e:in>
			<p:content/>
		</e:in>
	</b:main>
</t:main>
```

По фрагментам:

##### Вызов других шаблонов

```
<t:page>
	<b:page-box>
		<b:page>
			<p:header />
			<p:main />
		</b:page>
		<p:footer />
	</b:page-box>
</t:page>
`


##### Простой шаблон

```
<t:logo>
	<b:logo-box>
		<b:logo>
			<a:link/>
			<e:image x:src="../production/images/logo.png"/>
		</b:logo>
	</b:logo-box>
</t:logo>
```


##### Шаблон с указателем <p:content/>

```
<t:main>
	<b:main>
		<e:in>
			<p:content/>
		</e:in>
	</b:main>
</t:main>
```

Фрагмент страницы с вызовом шаблона main:

```
<page-canvas>
	<p:main>
		<b:news>
			Новости
		</b:news>
	</p:main>
</page-canvas>
```

Результат примера, фрагмент:

```
<div class="b-main">
	<div class="b-main__in">
		<div class="b-news">
			Новости
		</div>
	</div>
</div>
```

### Локальное переопределение шаблонов

Внешний шаблон можно полностью переопределить, заново объявив его на странице в пространстве имен t:.
Это полезно, если нужно изменить шаблон, или не нужно выводить его содержимое.

Удаляем со страницы "хлебные крошки" и меняем шаблон логотипа из примера выше – убираем ссылку на главную:

```
<templates>
	<t:breadcrumbs />

	<t:logo>
		<b:logo-box>
			<b:logo>
				<e:image x:src="../production/images/logo.png"/>
			</b:logo>
		</b:logo-box>
	</t:logo>
</templates>
<page-canvas>
	<p:logo/>
</page-canvas>
```




