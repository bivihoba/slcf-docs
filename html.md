HTML в BEMXML
=========

> HTML-разметка в BEMXML

### Синтаксис

Для назначения тега используется атрибут tag.

```
<b:page-title tag="h1">Page Title</b:page-title>
```

Для назначения атрибутов используется пространство имен x: и имя атрибута.

```
<b:link x:href="http://softline.ru">Softline</b:link>
```

### Назначение семантики

По умолчанию все узлы БЭМ-дерева являются простыми div-ами.
Присвоение им семантики (тег, атрибуты) осуществляется на нескольких уровнях.

Нести элементы html-разметки могут следующие компоненты БЭМ-разметки:

- блоки (в т.ч. дополнительные)
- элементы
- модификаторы (в т.ч. модификаторы дополнительных блоков)

### Семантика уровня проекта

Для задания семантики по умолчанию используется специальный файл default-semantic.xml. Пример:

```
<default-semantic>
	<b:link tag="a" x:href="#" x:title=""/>
	<e:title block="form-fields-group" tag="legend"/>
	<m:type val="pseudo" block="link" tag="span"/>
</default-semantic>
```

> Блоку link задается тег и атрибуты ```<b:link tag="a" x:href="#" x:title=""/>```

> Элементу title блока form-fields-group задается тег legend
```<e:title block="form-fields-group" tag="legend"/>```

> Для модификатора pseudo блока link тегом по умолчанию назначен span ```<m:type val="pseudo" block="link" tag="span"/>```

### Семантика уровня узла

Для назначения семантики в каком-то конкретном случае, нужно прописать желаемое прямо в БЭМ-коде страницы или шаблона, например:

```
<t:menu>
	<b:menu tag="ul">
		<e:item>
			<a:link x:href="/about">
			About
		</e:item>
	</b:menu>
</t:menu>
```

### Семантика уровня компилятора

В компилятор блоков зашиты правила назначения семантики в зависимости от окружения.

Так, на данный момент это следующие правила:
- Для "детей" блока, имеющего дефолтный тег <ul> или <ol>, тегом по умолчанию становится <li>
- Для всех "потомков" блока, имеющего дефолтный тег <a>, <span>, <label>, <dt> тегом по умолчанию становится <span>

Исходный код:

```
<b:news>
    <e:item>Элемент новостей</e:item>
</b:news>
```

> Фрагмент из default-semantic.xml ```<b:news tag="ul"/>

Результат:

```
<ul class="b-news">
    <li class="b-news__item">Элемент новостей</li>
</ul>
```

### Правила переопределения семантики

Присвоение семантики осуществляется на нескольких уровнях, каждый из которых имеет различную силу для разрешения конфликтов. В порядке усиления:

- Уровень шаблонизатора - зашитые в компилятор переопределения по умолчанию.
- Уровень проекта - в файле default-semantic.xml бандла
- Уровень узла - инлайново в БЭМ-сущностях на этом узле.

Уровень шаблонизатора используется только в том случае, если семантика для узла не определена на более высоком уровне.

Уровень проекта используется только в том случае, если семантика не определена на уровне узла.

На уровне узла и уровне проекта, семантика назначается в соответствии с силой БЭМ-сущностей для узла, в следующем порядке (от слабого к сильному):

- блок
- модификатор блока
- дополнительный блок
- модификатор дополнительного блока

Кроме того, имеет значение порядок записи БЭМ-сущностей. Например, в случае нескольких дополнительных блоков, сильнее будет тот, что записан последним. Справедливо и для модификаторов.

Таким образом, можно говорить о специфичности правил назначения семантики, аналогично CSS - *(уровень, сила, порядок записи)*.

_TODO больше примеров хороших и разных_

### Семантика по умолчанию

В стандартном проекте SLCF подключается библиотека [slcf-nano-core](https://github.com/askaza/slcf-nano-core), которая содержит объявления семантики для некоторых общих блоков.